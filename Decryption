#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>

void check(int argc, char* argv[]) {
if(argc != 2) {
puts("usage: $ ./decrypt keychar");
exit(1);
}
if(!isalpha(argv[1][0])) {
puts("key character must be alphabetical");
exit(1);
}
if(argv[1][0] != toupper(argv[1][0])) {
puts("key character must be upper case");
exit(1);
}
}

int modulo(int a, int b) {
if(a >= 0) {
return a % b;
}
else {
while(a < 0) {
a += b;
}
return a;
}
}

int main(int argc, char* argv[]) {
check(argc,argv);
char k = argv[1][0];
printf("key = %c , %d\n",k,k);
FILE* input = stdin;
FILE* output = stdout;
k = k -65;
char c;
while((c=getc(input)) != EOF) {
if(!isalpha(c))
continue;
c = c - 65;
c = modulo((c - k),26);
c = c + 65;
putc(c,output);
}
return 0;
}
